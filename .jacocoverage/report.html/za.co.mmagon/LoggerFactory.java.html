<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>LoggerFactory.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;JWebSwing&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">za.co.mmagon</a> &gt; <span class="el_source">LoggerFactory.java</span></div><h1>LoggerFactory.java</h1><pre class="source lang-java linenums">package za.co.mmagon;

import java.io.File;
import java.util.ArrayList;
import org.apache.log4j.AppenderSkeleton;
import org.apache.log4j.BasicConfigurator;
import org.apache.log4j.Level;
import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;

/**
 * The default logger factory for most apps
 * @author MMagon
 * @since 22 Jun 2013
 * @version 1.0
 */
public class LoggerFactory implements org.apache.log4j.spi.LoggerFactory
{

<span class="fc" id="L20">    private static final String LOGFILELOCATION = LoggerFactory.class.getResource(&quot;log4j.properties&quot;).getFile();</span>
    private static final LoggerFactory INSTANCE;
    private static final Logger LOG;

<span class="fc" id="L24">    private static Level loggerLevel = Level.TRACE;</span>

    static
    {
<span class="fc" id="L28">        INSTANCE = new LoggerFactory();</span>
<span class="fc" id="L29">        File f = new File(LOGFILELOCATION);</span>
<span class="pc bpc" id="L30" title="1 of 2 branches missed.">        if (f.exists())</span>
        {
<span class="fc" id="L32">            PropertyConfigurator.configure(LOGFILELOCATION);</span>
<span class="fc" id="L33">            LOG = INSTANCE.makeNewLoggerInstance(&quot;Log Factory&quot;);</span>
<span class="fc" id="L34">            LOG.debug(&quot;Loading Logging Configuration from file : &quot; + LOGFILELOCATION);</span>
        }
        else
        {
<span class="nc" id="L38">            BasicConfigurator.configure();</span>
<span class="nc" id="L39">            LOG = INSTANCE.makeNewLoggerInstance(&quot;Log Factory&quot;);</span>
<span class="nc" id="L40">            LOG.debug(&quot;No Log4J configuration found, doing Basic Configurator&quot;);</span>
        }
<span class="fc" id="L42">        LOG.info(&quot;[Logger Factory]-[Created]&quot;);</span>
<span class="fc" id="L43">    }</span>
<span class="fc" id="L44">    private final ArrayList&lt;AppenderSkeleton&gt; appenders = new ArrayList&lt;&gt;();</span>

    /**
     * Constructs a new instance of logger factory
     */
    private LoggerFactory()
<span class="fc" id="L50">    {</span>
<span class="fc" id="L51">    }</span>

    /**
     * Returns the set log level
     *
     * @return
     */
    public static Level getLoggerLevel()
    {
<span class="fc" id="L60">        return loggerLevel;</span>
    }

    /**
     * Sets the log level
     *
     * @param loggerLevel
     */
    public static void setLoggerLevel(Level loggerLevel)
    {
<span class="nc" id="L70">        LoggerFactory.loggerLevel = loggerLevel;</span>
<span class="nc" id="L71">        Logger.getRootLogger().setLevel(loggerLevel);</span>
<span class="nc" id="L72">    }</span>

    /**
     * Adds a new global log appender
     *
     * @param appender
     * @return
     */
    public boolean addLogAppender(AppenderSkeleton appender)
    {
<span class="pc bpc" id="L82" title="1 of 2 branches missed.">        if (appender != null)</span>
        {
<span class="pc bpc" id="L84" title="1 of 2 branches missed.">            if (!appenders.contains(appender))</span>
            {
<span class="fc" id="L86">                appenders.add(appender);</span>
<span class="pc bpc" id="L87" title="1 of 2 branches missed.">                if (appender.getName() == null)</span>
                {
<span class="fc" id="L89">                    appender.setName(appender.getClass().getSimpleName());</span>
                }
<span class="fc" id="L91">                Logger.getRootLogger().addAppender(appender);</span>
<span class="fc" id="L92">                LOG.debug(&quot;[New Log Appender]-[&quot; + appender.getName() + &quot;]&quot;);</span>
            }
<span class="pc bpc" id="L94" title="1 of 2 branches missed.">            return Logger.getRootLogger().getAppender(appender.getName()) != null;</span>
        }
<span class="nc" id="L96">        return false;</span>

    }

    /**
     * Build a new logger instance into Log4J
     * &lt;p&gt;
     * @param string The name of the logger instance
     * @return
     */
    @Override
    public org.apache.log4j.Logger makeNewLoggerInstance(String string)
    {
<span class="fc" id="L109">        Logger newLog = Logger.getLogger(&quot;&quot; + string + &quot;&quot;);</span>
<span class="fc" id="L110">        newLog.setLevel(getLoggerLevel());</span>
<span class="fc" id="L111">        return newLog;</span>
    }

    /**
     * Return my instance
     *
     * @return
     */
    public static LoggerFactory getInstance()
    {
<span class="fc" id="L121">        return INSTANCE;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>