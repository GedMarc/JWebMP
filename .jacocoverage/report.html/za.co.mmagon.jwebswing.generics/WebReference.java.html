<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>WebReference.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;JWebSwing&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">za.co.mmagon.jwebswing.generics</a> &gt; <span class="el_source">WebReference.java</span></div><h1>WebReference.java</h1><pre class="source lang-java linenums">package za.co.mmagon.jwebswing.generics;

import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.annotation.JsonProperty;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Comparator;
import org.apache.log4j.Logger;
import za.co.mmagon.LoggerFactory;
import za.co.mmagon.jwebswing.base.html.interfaces.NamedPair;
import za.co.mmagon.jwebswing.base.servlets.enumarations.RequirementsPriority;

/**
 * Denotes a specific Web Reference, either remotely or locally
 *
 * @since Forever
 * @version 2.0
 * @author MMagon
 *
 * 2.0 Added Sorting
 */
public class WebReference implements NamedPair&lt;String, String&gt;, Serializable, Comparator&lt;WebReference&gt;
{

    private static final long serialVersionUID = 1L;
    @JsonIgnore
    private String left;
    @JsonIgnore
    private String right;
<span class="fc" id="L30">    @JsonIgnore</span>
    private boolean leftOnly = true;
<span class="fc" id="L32">    private static boolean isLocal = true;</span>
<span class="fc" id="L33">    @JsonIgnore</span>
<span class="fc" id="L34">    private Integer sortOrder = 500000;</span>
    @JsonIgnore
<span class="fc" id="L36">    private static boolean useMinAtEndOfExtension = false;</span>
<span class="fc" id="L37">    @JsonIgnore</span>
    private RequirementsPriority priority = RequirementsPriority.DontCare;
<span class="fc" id="L39">    @JsonIgnore</span>
    private boolean canMinifyAtRemote = true;

    /**
     * The name of the reference
     */
    private String name;
    /**
     * The specified version
     */
    private Double version;

    /**
     * The local reference
     */
    @JsonIgnore
    private String localReference;
    /**
     * The remote reference
     */
    @JsonIgnore
    private String remoteReference;

    /**
     * The dummy reference for the sorting
     */
<span class="fc" id="L65">    private static final WebReference dummyReference = new WebReference(null, null, null, null);</span>

    /**
     * Sets this JavaScript Reference with the Name, the Version
     *
     * @param name            The Name of the Plugin
     * @param version         The version of the Plugin
     * @param localReference  The local Reference
     * @param remoteReference The Remote Reference
     * @param sortOrder       The Sorting Order for the Reference
     */
    public WebReference(String name, Double version, String localReference, String remoteReference, int sortOrder)
<span class="fc" id="L77">    {</span>
<span class="fc" id="L78">        this.left = localReference;</span>
<span class="fc" id="L79">        this.right = remoteReference;</span>

<span class="fc" id="L81">        this.name = name;</span>
<span class="fc" id="L82">        this.version = version;</span>
<span class="fc" id="L83">        this.localReference = localReference;</span>
<span class="fc" id="L84">        this.remoteReference = remoteReference;</span>
<span class="fc" id="L85">    }</span>

    /**
     * Sets this JavaScript Reference with the Name, the Version
     *
     * @param name            The Name of the Plugin
     * @param version         The version of the Plugin
     * @param localReference  The local Reference
     * @param remoteReference The Remote Reference
     */
    public WebReference(String name, Double version, String localReference, String remoteReference)
    {
<span class="fc" id="L97">        this(name, version, localReference, remoteReference, 500000);</span>
<span class="fc" id="L98">    }</span>

    /**
     * Sets the local reference
     *
     * @param left
     */
    public void setLeft(String left)
    {
<span class="fc" id="L107">        this.left = left;</span>
<span class="fc" id="L108">        this.localReference = left;</span>
<span class="fc" id="L109">    }</span>

    /**
     * Sets the remote reference
     *
     * @param right
     */
    public void setRight(String right)
    {
<span class="fc" id="L118">        this.right = right;</span>
<span class="fc" id="L119">        this.remoteReference = right;</span>
<span class="fc" id="L120">    }</span>

    /**
     * Gets the local reference
     *
     * @return
     */
    @Override
    public String getLeft()
    {
<span class="nc" id="L130">        return localReference;</span>
    }

    /**
     * Sets the local reference
     *
     * @return
     */
    @Override
    public String getRight()
    {
<span class="nc" id="L141">        return remoteReference;</span>
    }

    @Override
    public int hashCode()
    {
<span class="nc" id="L147">        return left.hashCode() ^ right.hashCode();</span>
    }

    @Override
    public boolean equals(Object o)
    {
<span class="nc bnc" id="L153" title="All 2 branches missed.">        if (o == null)</span>
        {
<span class="nc" id="L155">            return false;</span>
        }
<span class="nc bnc" id="L157" title="All 2 branches missed.">        if (!(o instanceof WebReference))</span>
        {
<span class="nc" id="L159">            return false;</span>
        }
<span class="nc" id="L161">        WebReference pairo = (WebReference) o;</span>
<span class="nc bnc" id="L162" title="All 4 branches missed.">        return this.left.equals(pairo.getLeft())</span>
                &amp;&amp; (!leftOnly
<span class="nc bnc" id="L164" title="All 2 branches missed.">                &amp;&amp; this.right.equals(pairo.getRight()));</span>
    }

    /**
     * Returns if this pair is set to validate on the left field only
     *
     * @return
     */
    public boolean isLeftOnly()
    {
<span class="nc" id="L174">        return leftOnly;</span>
    }

    /**
     * Sets if this pair should validate on the left pair only
     *
     * @param leftOnly
     */
    public void setLeftOnly(boolean leftOnly)
    {
<span class="nc" id="L184">        this.leftOnly = leftOnly;</span>
<span class="nc" id="L185">    }</span>

    /**
     * Whether or not to return the local reference or the remote reference
     *
     * @return
     */
    @JsonProperty(&quot;local&quot;)
    public static boolean isIsLocal()
    {
<span class="fc" id="L195">        return isLocal;</span>
    }

    /**
     * Sets whether this reference should be local or remote
     *
     * @param isLocal
     */
    public static void setIsLocal(boolean isLocal)
    {
<span class="fc" id="L205">        WebReference.isLocal = isLocal;</span>
<span class="fc" id="L206">    }</span>

    /**
     * Gets the name of this reference
     *
     * @return
     */
    public String getName()
    {
<span class="fc" id="L215">        return name;</span>
    }

    /**
     * Sets the name of this reference
     *
     * @param name
     */
    public void setName(String name)
    {
<span class="nc" id="L225">        this.name = name;</span>
<span class="nc" id="L226">    }</span>

    /**
     * Gets the double version of this reference
     *
     * @return
     */
    public Double getVersion()
    {
<span class="fc" id="L235">        return version;</span>
    }

    /**
     * Sets the double version of this reference
     *
     * @param version
     */
    public void setVersion(Double version)
    {
<span class="nc" id="L245">        this.version = version;</span>
<span class="nc" id="L246">    }</span>

    /**
     * Gets the physical local reference
     *
     * @return
     */
    public String getLocalReference()
    {
<span class="fc" id="L255">        return localReference;</span>
    }

    /**
     * Sets the physical local reference
     *
     * @param localReference
     */
    public void setLocalReference(String localReference)
    {
<span class="fc" id="L265">        setLeft(localReference);</span>
<span class="fc" id="L266">        this.localReference = localReference;</span>
<span class="fc" id="L267">    }</span>

    /**
     * Gets the physical remote reference
     *
     * @return
     */
    public String getRemoteReference()
    {
<span class="fc" id="L276">        return remoteReference;</span>
    }

    /**
     * Sets the remote physical reference
     *
     * @param remoteReference
     */
    public void setRemoteReference(String remoteReference)
    {
<span class="fc" id="L286">        setRight(remoteReference);</span>
<span class="fc" id="L287">        this.remoteReference = remoteReference;</span>
<span class="fc" id="L288">    }</span>

<span class="fc" id="L290">    private static final Logger LOG = LoggerFactory.getInstance().makeNewLoggerInstance(&quot;Web Reference&quot;);</span>

    /**
     * Sets whether or not to use &quot;min.js&quot; or use a folder for the min directory
     *
     * @return
     */
    public static final boolean isUseMinAtEndOfExtension()
    {
<span class="nc" id="L299">        return useMinAtEndOfExtension;</span>
    }

    /**
     * Sets whether or not to append min into the filename
     *
     * @param useMinAtEndOfExtension
     */
    public static final void setUseMinAtEndOfExtension(boolean useMinAtEndOfExtension)
    {
<span class="nc" id="L309">        WebReference.useMinAtEndOfExtension = useMinAtEndOfExtension;</span>
<span class="nc" id="L310">    }</span>

    /**
     * Compares two references to each other on sort order
     *
     * @param o1
     * @param o2
     * @return
     */
    @Override
    public int compare(WebReference o1, WebReference o2)
    {
<span class="fc" id="L322">        return o1.getSortOrder().compareTo(o2.getSortOrder());</span>
    }

    /**
     * Default Sort Order
     * &lt;p&gt;
     * 0 - Root (JQuery)
     * 5 - Core
     * 10 - Core Accompanied
     * 15 - Stand Alone Components
     * 20 - Complex Components
     * 500k - Default
     * 600k - Atmosphere Reserved
     *
     * @return
     */
    public Integer getSortOrder()
    {
<span class="fc" id="L340">        return sortOrder;</span>
    }

    /**
     * Default Sort Order
     * &lt;p&gt;
     * 0 - Root (JQuery)
     * 5 - Core
     * 10 - Core Accompanied
     * 15 - Stand Alone Components
     * 20 - Complex Components
     * 500k - Default
     * 600k - Atmosphere Reserved
     * &lt;p&gt;
     */
    public final void setSortOrder(Integer sortOrder)
    {
<span class="fc" id="L357">        this.sortOrder = sortOrder;</span>
        //return;
<span class="fc" id="L359">    }</span>

    /**
     * Sorts an Array List of References
     *
     * @param arrayList
     * @return
     */
    public static ArrayList&lt;? extends WebReference&gt; sort(ArrayList&lt;? extends WebReference&gt; arrayList)
    {
<span class="fc" id="L369">        arrayList.sort(dummyReference);</span>
<span class="fc" id="L370">        return arrayList;</span>
    }

    /**
     * Returns a dummy reference for the sorting array
     *
     * @return
     */
    public static WebReference getDummyReference()
    {
<span class="fc" id="L380">        return dummyReference;</span>
    }

    /**
     * Return the priority of the reference
     *
     * @return
     */
    public RequirementsPriority getPriority()
    {
<span class="fc" id="L390">        return priority;</span>
    }

    /**
     * Sets the priority of the reference
     *
     * @param priority
     */
    public void setPriority(RequirementsPriority priority)
    {
<span class="fc" id="L400">        this.priority = priority;</span>
<span class="fc" id="L401">    }</span>

    /**
     * Specifies if the remote has a min file
     *
     * @return
     */
    public boolean isCanMinifyAtRemote()
    {
<span class="nc" id="L410">        return canMinifyAtRemote;</span>
    }

    /**
     * Specifies if the remote has a min file
     *
     * @param canMinifyAtRemote
     */
    public void setCanMinifyAtRemote(boolean canMinifyAtRemote)
    {
<span class="fc" id="L420">        this.canMinifyAtRemote = canMinifyAtRemote;</span>
<span class="fc" id="L421">    }</span>

    /**
     * Returns either the local or remote reference depending on configuration
     * &lt;p&gt;
     * @return
     */
    @Override
    @JsonProperty(&quot;reference&quot;)
    public final String toString()
    {
<span class="fc bfc" id="L432" title="All 2 branches covered.">        if (isIsLocal())</span>
        {
<span class="fc" id="L434">            StringBuilder sb = new StringBuilder(getLocalReference());</span>
<span class="pc bpc" id="L435" title="1 of 2 branches missed.">            if (useMinAtEndOfExtension)</span>
            {
<span class="nc bnc" id="L437" title="All 2 branches missed.">                if (!sb.toString().contains(&quot;.min.&quot;))</span>
                {
<span class="nc" id="L439">                    sb.insert(sb.lastIndexOf(&quot;.&quot;), &quot;.min&quot;);</span>
                }
            }
<span class="fc" id="L442">            return sb.toString();</span>
        }
        else
        {
<span class="fc" id="L446">            StringBuilder sb = new StringBuilder(getRemoteReference());</span>
<span class="pc bpc" id="L447" title="3 of 4 branches missed.">            if (useMinAtEndOfExtension &amp;&amp; isCanMinifyAtRemote())</span>
            {
<span class="nc bnc" id="L449" title="All 2 branches missed.">                if (!sb.toString().contains(&quot;.min.&quot;))</span>
                {
<span class="nc" id="L451">                    sb.insert(sb.lastIndexOf(&quot;.&quot;), &quot;.min&quot;);</span>
                }
            }
<span class="fc" id="L454">            return sb.toString();</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>