<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>WebReference.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;JWebSwing&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">za.co.mmagon.jwebswing.generics</a> &gt; <span class="el_source">WebReference.java</span></div><h1>WebReference.java</h1><pre class="source lang-java linenums">package za.co.mmagon.jwebswing.generics;

import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.annotation.JsonProperty;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Comparator;
import java.util.logging.Logger;
import za.co.mmagon.jwebswing.base.html.interfaces.NamedPair;
import za.co.mmagon.jwebswing.base.servlets.enumarations.RequirementsPriority;
import za.co.mmagon.logger.LogFactory;

/**
 * Denotes a specific Web Reference, either remotely or locally
 *
 * @param &lt;T&gt; The type implementation
 *
 * @since Forever
 * @version 2.0
 * @author MMagon
 *
 * 2.0 Added Sorting
 */
public class WebReference&lt;T extends WebReference&gt; implements NamedPair&lt;String, String&gt;, Serializable, Comparator&lt;WebReference&gt;
{

    private static final long serialVersionUID = 1L;
    /**
     * The left side
     */
    @JsonIgnore
    private String left;
    /**
     * The right side
     */
    @JsonIgnore
    private String right;
    /**
     * If this must reference with the left side only
     */
<span class="fc" id="L41">    @JsonIgnore</span>
    private boolean leftOnly = true;
    /**
     * If the reference is local
     */
<span class="fc" id="L46">    private static boolean isLocal = true;</span>
    /**
     * The ridiculous sort order
     */
<span class="fc" id="L50">    @JsonIgnore</span>
<span class="fc" id="L51">    private Integer sortOrder = 500000;</span>
    /**
     * To use min at the end or not
     */
    @JsonIgnore
<span class="fc" id="L56">    private static boolean useMinAtEndOfExtension = false;</span>
    /**
     * The default priority
     */
<span class="fc" id="L60">    @JsonIgnore</span>
    private RequirementsPriority priority = RequirementsPriority.DontCare;
    /**
     * If the client can minify at the remote source
     */
<span class="fc" id="L65">    @JsonIgnore</span>
    private boolean canMinifyAtRemote = true;
    /**
     * If this reference is a cordova reference, e.g. does it render in the dynamic site loader
     */
<span class="fc" id="L70">    private boolean cordovaRequired = false;</span>
    /**
     * The name of the reference
     */
    private String name;
    /**
     * The specified version
     */
    private Double version;

    /**
     * The local reference
     */
    @JsonIgnore
    private String localReference;
    /**
     * The remote reference
     */
    @JsonIgnore
    private String remoteReference;

    /**
     * The dummy reference for the sorting
     */
<span class="fc" id="L94">    private static final WebReference dummyReference = new WebReference(null, null, null, null);</span>

    /**
     * Sets this JavaScript Reference with the Name, the Version
     *
     * @param name            The Name of the Plugin
     * @param version         The version of the Plugin
     * @param localReference  The local Reference
     * @param remoteReference The Remote Reference
     * @param sortOrder       The Sorting Order for the Reference
     */
    public WebReference(String name, Double version, String localReference, String remoteReference, int sortOrder)
<span class="fc" id="L106">    {</span>
<span class="fc" id="L107">        this.left = localReference;</span>
<span class="fc" id="L108">        this.right = remoteReference;</span>

<span class="fc" id="L110">        this.name = name;</span>
<span class="fc" id="L111">        this.version = version;</span>
<span class="fc" id="L112">        this.localReference = localReference;</span>
<span class="fc" id="L113">        this.remoteReference = remoteReference;</span>
<span class="fc" id="L114">    }</span>

    /**
     * Sets this JavaScript Reference with the Name, the Version
     *
     * @param name            The Name of the Plugin
     * @param version         The version of the Plugin
     * @param localReference  The local Reference
     * @param remoteReference The Remote Reference
     */
    public WebReference(String name, Double version, String localReference, String remoteReference)
    {
<span class="fc" id="L126">        this(name, version, localReference, remoteReference, 500000);</span>
<span class="fc" id="L127">    }</span>

    /**
     * Sets the local reference
     *
     * @param left
     *
     * @return
     */
    public T setLeft(String left)
    {
<span class="fc" id="L138">        this.left = left;</span>
<span class="fc" id="L139">        this.localReference = left;</span>
<span class="fc" id="L140">        return (T) this;</span>
    }

    /**
     * Sets the remote reference
     *
     * @param right
     *
     * @return
     */
    public T setRight(String right)
    {
<span class="fc" id="L152">        this.right = right;</span>
<span class="fc" id="L153">        this.remoteReference = right;</span>
<span class="fc" id="L154">        return (T) this;</span>
    }

    /**
     * Gets the local reference
     *
     * @return
     */
    @Override
    public String getLeft()
    {
<span class="nc" id="L165">        return localReference;</span>
    }

    /**
     * Sets the local reference
     *
     * @return
     */
    @Override
    public String getRight()
    {
<span class="nc" id="L176">        return remoteReference;</span>
    }

    @Override
    public int hashCode()
    {
<span class="nc" id="L182">        return left.hashCode() ^ right.hashCode();</span>
    }

    @Override
    public boolean equals(Object o)
    {
<span class="nc bnc" id="L188" title="All 2 branches missed.">        if (o == null)</span>
        {
<span class="nc" id="L190">            return false;</span>
        }
<span class="nc bnc" id="L192" title="All 2 branches missed.">        if (!(o instanceof WebReference))</span>
        {
<span class="nc" id="L194">            return false;</span>
        }
<span class="nc" id="L196">        WebReference pairo = (WebReference) o;</span>
<span class="nc bnc" id="L197" title="All 4 branches missed.">        return this.left.equals(pairo.getLeft())</span>
                &amp;&amp; (!leftOnly
<span class="nc bnc" id="L199" title="All 2 branches missed.">                &amp;&amp; this.right.equals(pairo.getRight()));</span>
    }

    /**
     * Returns if this pair is set to validate on the left field only
     *
     * @return
     */
    public boolean isLeftOnly()
    {
<span class="nc" id="L209">        return leftOnly;</span>
    }

    /**
     * Sets if this pair should validate on the left pair only
     *
     * @param leftOnly
     *
     * @return
     */
    public T setLeftOnly(boolean leftOnly)
    {
<span class="nc" id="L221">        this.leftOnly = leftOnly;</span>
<span class="nc" id="L222">        return (T) this;</span>
    }

    /**
     * Whether or not to return the local reference or the remote reference
     *
     * @return
     */
    @JsonProperty(&quot;local&quot;)
    public static boolean isIsLocal()
    {
<span class="fc" id="L233">        return isLocal;</span>
    }

    /**
     * Sets whether this reference should be local or remote
     *
     * @param isLocal
     *
     * @return
     */
    public static void setIsLocal(boolean isLocal)
    {
<span class="fc" id="L245">        WebReference.isLocal = isLocal;</span>
<span class="fc" id="L246">    }</span>

    /**
     * Gets the name of this reference
     *
     * @return
     */
    public String getName()
    {
<span class="fc" id="L255">        return name;</span>
    }

    /**
     * Sets the name of this reference
     *
     * @param name
     *
     * @return
     */
    public T setName(String name)
    {
<span class="nc" id="L267">        this.name = name;</span>
<span class="nc" id="L268">        return (T) this;</span>
    }

    /**
     * Gets the double version of this reference
     *
     * @return
     */
    public Double getVersion()
    {
<span class="fc" id="L278">        return version;</span>
    }

    /**
     * Sets the double version of this reference
     *
     * @param version
     *
     * @return
     */
    public T setVersion(Double version)
    {
<span class="nc" id="L290">        this.version = version;</span>
<span class="nc" id="L291">        return (T) this;</span>
    }

    /**
     * Gets the physical local reference
     *
     * @return
     */
    public String getLocalReference()
    {
<span class="fc" id="L301">        return localReference;</span>
    }

    /**
     * Sets the physical local reference
     *
     * @param localReference
     *
     * @return
     */
    public T setLocalReference(String localReference)
    {
<span class="fc" id="L313">        setLeft(localReference);</span>
<span class="fc" id="L314">        this.localReference = localReference;</span>
<span class="fc" id="L315">        return (T) this;</span>
    }

    /**
     * Gets the physical remote reference
     *
     * @return
     */
    public String getRemoteReference()
    {
<span class="fc" id="L325">        return remoteReference;</span>
    }

    /**
     * Sets the remote physical reference
     *
     * @param remoteReference
     *
     * @return
     */
    public T setRemoteReference(String remoteReference)
    {
<span class="fc" id="L337">        setRight(remoteReference);</span>
<span class="fc" id="L338">        this.remoteReference = remoteReference;</span>
<span class="fc" id="L339">        return (T) this;</span>
    }

<span class="fc" id="L342">    private static final Logger LOG = LogFactory.getInstance().getLogger(&quot;Web Reference&quot;);</span>

    /**
     * Sets whether or not to use &quot;min.js&quot; or use a folder for the min directory
     *
     * @return
     */
    public static final boolean isUseMinAtEndOfExtension()
    {
<span class="nc" id="L351">        return useMinAtEndOfExtension;</span>
    }

    /**
     * Sets whether or not to append min into the filename
     *
     * @param useMinAtEndOfExtension
     */
    public static final void setUseMinAtEndOfExtension(boolean useMinAtEndOfExtension)
    {
<span class="nc" id="L361">        WebReference.useMinAtEndOfExtension = useMinAtEndOfExtension;</span>
<span class="nc" id="L362">    }</span>

    /**
     * Compares two references to each other on sort order
     *
     * @param o1
     * @param o2
     *
     * @return
     */
    @Override
    public int compare(WebReference o1, WebReference o2)
    {
<span class="fc" id="L375">        return o1.getSortOrder().compareTo(o2.getSortOrder());</span>
    }

    /**
     * Default Sort Order
     * &lt;p&gt;
     * 0 - Root (JQuery) 5 - Core 10 - Core Accompanied 15 - Stand Alone Components 20 - Complex Components 500k - Default 600k - Atmosphere Reserved
     *
     * @return
     */
    public Integer getSortOrder()
    {
<span class="fc" id="L387">        return sortOrder;</span>
    }

    /**
     * Default Sort Order
     * &lt;p&gt;
     * 0 - Root (JQuery) 5 - Core 10 - Core Accompanied 15 - Stand Alone Components 20 - Complex Components 500k - Default 600k - Atmosphere Reserved
     * &lt;p&gt;
     * @param sortOrder
     *
     * @return
     */
    public final T setSortOrder(Integer sortOrder)
    {
<span class="fc" id="L401">        this.sortOrder = sortOrder;</span>
<span class="fc" id="L402">        return (T) this;</span>
    }

    /**
     * Sorts an Array List of References
     *
     * @param arrayList
     *
     * @return
     */
    public static ArrayList&lt;? extends WebReference&gt; sort(ArrayList&lt;? extends WebReference&gt; arrayList)
    {
<span class="fc" id="L414">        arrayList.sort(dummyReference);</span>
<span class="fc" id="L415">        return arrayList;</span>
    }

    /**
     * Returns a dummy reference for the sorting array
     *
     * @return
     */
    public static WebReference getDummyReference()
    {
<span class="fc" id="L425">        return dummyReference;</span>
    }

    /**
     * Return the priority of the reference
     *
     * @return
     */
    public RequirementsPriority getPriority()
    {
<span class="fc" id="L435">        return priority;</span>
    }

    /**
     * Sets the priority of the reference
     *
     * @param priority
     *
     * @return
     */
    public T setPriority(RequirementsPriority priority)
    {
<span class="fc" id="L447">        this.priority = priority;</span>
<span class="fc" id="L448">        return (T) this;</span>
    }

    /**
     * Specifies if the remote has a min file
     *
     * @return
     */
    public boolean isCanMinifyAtRemote()
    {
<span class="nc" id="L458">        return canMinifyAtRemote;</span>
    }

    /**
     * Specifies if the remote has a min file
     *
     * @param canMinifyAtRemote
     *
     * @return
     */
    public T setCanMinifyAtRemote(boolean canMinifyAtRemote)
    {
<span class="fc" id="L470">        this.canMinifyAtRemote = canMinifyAtRemote;</span>
<span class="fc" id="L471">        return (T) this;</span>
    }

    /**
     * If this reference is a cordova reference, e.g. does it render in the dynamic site loader
     *
     * @return
     */
    public boolean isCordovaRequired()
    {
<span class="fc" id="L481">        return cordovaRequired;</span>
    }

    /**
     * If this reference is a cordova reference, e.g. does it render in the dynamic site loader
     *
     * @param cordovaRequired
     *
     * @return
     */
    public T setCordovaRequired(boolean cordovaRequired)
    {
<span class="fc" id="L493">        this.cordovaRequired = cordovaRequired;</span>
<span class="fc" id="L494">        return (T) this;</span>
    }

    /**
     * Returns either the local or remote reference depending on configuration
     * &lt;p&gt;
     * @return
     */
    @Override
    @JsonProperty(&quot;reference&quot;)
    public final String toString()
    {
<span class="fc bfc" id="L506" title="All 2 branches covered.">        if (isIsLocal())</span>
        {
<span class="fc" id="L508">            StringBuilder sb = new StringBuilder(getLocalReference());</span>
<span class="pc bpc" id="L509" title="1 of 2 branches missed.">            if (useMinAtEndOfExtension)</span>
            {
<span class="nc bnc" id="L511" title="All 2 branches missed.">                if (!sb.toString().contains(&quot;.min.&quot;))</span>
                {
<span class="nc" id="L513">                    sb.insert(sb.lastIndexOf(&quot;.&quot;), &quot;.min&quot;);</span>
                }
            }
<span class="fc" id="L516">            return sb.toString();</span>
        }
        else
        {
<span class="fc" id="L520">            StringBuilder sb = new StringBuilder(getRemoteReference());</span>
<span class="pc bpc" id="L521" title="3 of 4 branches missed.">            if (useMinAtEndOfExtension &amp;&amp; isCanMinifyAtRemote())</span>
            {
<span class="nc bnc" id="L523" title="All 2 branches missed.">                if (!sb.toString().contains(&quot;.min.&quot;))</span>
                {
<span class="nc" id="L525">                    sb.insert(sb.lastIndexOf(&quot;.&quot;), &quot;.min&quot;);</span>
                }
            }
<span class="fc" id="L528">            return sb.toString();</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>